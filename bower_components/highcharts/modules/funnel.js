!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e=t.getOptions(),n=e.plotOptions,i=t.seriesTypes,o=t.merge,r=function(){},s=t.each,a=t.pick;n.funnel=o(n.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),i.funnel=t.extendClass(i.pie,{type:"funnel",animate:r,translate:function(){var t,e,n,i,o,a,l,p,h,d,c,u=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this.chart,b=this.options,y=b.reversed,m=b.ignoreHiddenPoint,v=g.plotWidth,k=g.plotHeight,C=0,g=b.center,W=u(g[0],v),w=u(g[1],k),L=u(b.width,v),H=u(b.height,k),Y=u(b.neckWidth,v),x=u(b.neckHeight,k),A=w-H/2+H-x,u=this.data,O="left"===b.dataLabels.position?1:0;this.getWidthAt=e=function(t){var e=w-H/2;return t>A||H===x?Y:Y+(L-Y)*(1-(t-e)/(H-x))},this.getX=function(t,n){return W+(n?-1:1)*(e(y?k-t:t)/2+b.dataLabels.distance)},this.center=[W,w,H],this.centerX=W,s(u,function(t){m&&t.visible===!1||(f+=t.y)}),s(u,function(s){c=null,i=f?s.y/f:0,a=w-H/2+C*H,h=a+i*H,t=e(a),o=W-t/2,l=o+t,t=e(h),p=W-t/2,d=p+t,a>A?(o=p=W-Y/2,l=d=W+Y/2):h>A&&(c=h,t=e(A),p=W-t/2,d=p+t,h=A),y&&(a=H-a,h=H-h,c=c?H-c:null),n=["M",o,a,"L",l,a,d,h],c&&n.push(d,c,p,c),n.push(p,h,"Z"),s.shapeType="path",s.shapeArgs={d:n},s.percentage=100*i,s.plotX=W,s.plotY=(a+(c||h))/2,s.tooltipPos=[W,s.plotY],s.slice=r,s.half=O,m&&s.visible===!1||(C+=i)})},drawPoints:function(){var t=this,e=t.options,n=t.chart.renderer;s(t.data,function(i){var o=i.options,r=i.graphic,s=i.shapeArgs;r?r.animate(s):i.graphic=n.path(s).attr({fill:i.color,stroke:a(o.borderColor,e.borderColor),"stroke-width":a(o.borderWidth,e.borderWidth)}).add(t.group)})},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,n,o,r,s=this.data,a=this.options.dataLabels.distance,l=s.length;for(this.center[2]-=2*a;l--;)n=s[l],e=(t=n.half)?1:-1,r=n.plotY,o=this.getX(r,t),n.labelPos=[0,r,o+(a-5)*e,r,o+a*e,r,t?"right":"left",0];i.pie.prototype.drawDataLabels.call(this)}}),e.plotOptions.pyramid=t.merge(e.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),t.seriesTypes.pyramid=t.extendClass(t.seriesTypes.funnel,{type:"pyramid"})});