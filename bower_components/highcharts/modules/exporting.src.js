!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,n,o=t.win,i=o.document,r=t.Chart,a=t.addEvent,s=t.removeEvent,l=t.fireEvent,c=t.createElement,p=t.discardElement,u=t.css,h=t.merge,d=t.each,g=t.extend,m=t.splat,x=Math,f=x.max,y=t.isTouchDevice,b="M",v="L",w="div",S="hidden",k="none",E="highcharts-",C="absolute",G="px",M=t.Renderer.prototype.symbols,F=t.getOptions();g(F.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),F.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:k,color:"#303030",fontSize:y?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},F.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:E+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,n){var o,r;r=c("form",h({method:"post",action:t,enctype:"multipart/form-data"},n),{display:k},i.body);for(o in e)c("input",{type:S,name:o,value:e[o]},null,r);r.submit(),p(r)},g(r.prototype,{sanitizeSVG:function(t){return t.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(n){var o,r,a,s,l,u,x,f,y,b=this,v=h(b.options,n),S=v.exporting.allowHTML;return i.createElementNS||(i.createElementNS=function(t,e){return i.createElement(e)}),r=c(w,null,{position:C,top:"-9999em",width:b.chartWidth+G,height:b.chartHeight+G},i.body),x=b.renderTo.style.width,f=b.renderTo.style.height,l=v.exporting.sourceWidth||v.chart.width||/px$/.test(x)&&parseInt(x,10)||600,u=v.exporting.sourceHeight||v.chart.height||/px$/.test(f)&&parseInt(f,10)||400,g(v.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:l,height:u}),v.exporting.enabled=!1,delete v.data,v.series=[],d(b.series,function(t){s=h(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible}),s.isInternal||v.series.push(s)}),n&&d(["xAxis","yAxis"],function(t){d(m(n[t]),function(e,n){v[t][n]=h(v[t][n],e)})}),o=new t.Chart(v,b.callback),d(["xAxis","yAxis"],function(t){d(b[t],function(n,i){var r=o[t][i],a=n.getExtremes(),s=a.userMin,l=a.userMax;!r||s===e&&l===e||r.setExtremes(s,l,!0,!1)})}),a=o.getChartHTML(),v=null,o.destroy(),p(r),S&&(y=a.match(/<\/svg>(.*?$)/),y&&(y='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+y[1]+"</body></foreignObject>",a=a.replace("</svg>",y+"</svg>"))),a=this.sanitizeSVG(a),a=a.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(t,e){var n=this.options.exporting;return this.getSVG(h({chart:{borderRadius:0}},n.chartOptions,e,{exporting:{sourceWidth:t&&t.sourceWidth||n.sourceWidth,sourceHeight:t&&t.sourceHeight||n.sourceHeight}}))},exportChart:function(e,n){var o=this.getSVGForExport(e,n);e=h(this.options.exporting,e),t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:o},e.formAttributes)},print:function(){var t=this,e=t.container,n=[],r=e.parentNode,a=i.body,s=a.childNodes;t.isPrinting||(t.isPrinting=!0,t.pointer.reset(null,0),l(t,"beforePrint"),d(s,function(t,e){1===t.nodeType&&(n[e]=t.style.display,t.style.display=k)}),a.appendChild(e),o.focus(),o.print(),setTimeout(function(){r.appendChild(e),d(s,function(t,e){1===t.nodeType&&(t.style.display=n[e])}),t.isPrinting=!1,l(t,"afterPrint")},1e3))},contextMenu:function(t,e,n,o,r,l,p){var h,m,x,y,b=this,v=b.options.navigation,S=v.menuItemStyle,E=b.chartWidth,M=b.chartHeight,F="cache-"+t,T=b[F],H=f(r,l),P="3px 3px 10px #888",$=function(e){b.pointer.inClass(e.target,t)||m()};T||(b[F]=T=c(w,{className:t},{position:C,zIndex:1e3,padding:H+G},b.container),h=c(w,null,g({MozBoxShadow:P,WebkitBoxShadow:P,boxShadow:P},v.menuStyle),T),m=function(){u(T,{display:k}),p&&p.setState(0),b.openMenu=!1},a(T,"mouseleave",function(){x=setTimeout(m,500)}),a(T,"mouseenter",function(){clearTimeout(x)}),a(i,"mouseup",$),a(b,"destroy",function(){s(i,"mouseup",$)}),d(e,function(t){if(t){var e=t.separator?c("hr",null,null,h):c(w,{onmouseover:function(){u(this,v.menuItemHoverStyle)},onmouseout:function(){u(this,S)},onclick:function(e){e&&e.stopPropagation(),m(),t.onclick&&t.onclick.apply(b,arguments)},innerHTML:t.text||b.options.lang[t.textKey]},g({cursor:"pointer"},S),h);b.exportDivElements.push(e)}}),b.exportDivElements.push(h,T),b.exportMenuWidth=T.offsetWidth,b.exportMenuHeight=T.offsetHeight),y={display:"block"},n+b.exportMenuWidth>E?y.right=E-n-r-H+G:y.left=n-H+G,o+l+b.exportMenuHeight>M&&"top"!==p.alignOptions.verticalAlign?y.bottom=M-o-H+G:y.top=o+l-H+G,u(T,y),b.openMenu=!0},addButton:function(e){var o,i,r=this,a=r.renderer,s=h(r.options.navigation.buttonOptions,e),l=s.onclick,c=s.menuItems,p={stroke:s.symbolStroke,fill:s.symbolFill},u=s.symbolSize||12;if(r.btnCount||(r.btnCount=0),r.exportDivElements||(r.exportDivElements=[],r.exportSVGElements=[]),s.enabled!==!1){var d,m=s.theme,x=m.states,f=x&&x.hover,y=x&&x.select;delete m.states,l?d=function(t){t.stopPropagation(),l.call(r,t)}:c&&(d=function(){r.contextMenu(i.menuClassName,c,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),s.text&&s.symbol?m.paddingLeft=t.pick(m.paddingLeft,25):s.text||g(m,{width:s.width,height:s.height,padding:0}),i=a.button(s.text,0,0,d,m,f,y).attr({title:r.options.lang[s._titleKey],"stroke-linecap":"round"}),i.menuClassName=e.menuClassName||E+"menu-"+r.btnCount++,s.symbol&&(o=a.symbol(s.symbol,s.symbolX-u/2,s.symbolY-u/2,u,u).attr(g(p,{"stroke-width":s.symbolStrokeWidth||1,zIndex:1})).add(i)),i.add().align(g(s,{width:i.width,x:t.pick(s.x,n)}),!0,"spacingBox"),n+=(i.width+s.buttonSpacing)*("right"===s.align?-1:1),r.exportSVGElements.push(i,o)}},destroyExport:function(t){var e,n,o=t.target;for(e=0;e<o.exportSVGElements.length;e++)n=o.exportSVGElements[e],n&&(n.onclick=n.ontouchstart=null,o.exportSVGElements[e]=n.destroy());for(e=0;e<o.exportDivElements.length;e++)n=o.exportDivElements[e],s(n,"mouseleave"),o.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,p(n)}}),M.menu=function(t,e,n,o){var i=[b,t,e+2.5,v,t+n,e+2.5,b,t,e+o/2+.5,v,t+n,e+o/2+.5,b,t,e+o-1.5,v,t+n,e+o-1.5];return i},r.prototype.callbacks.push(function(t){var e,o=t.options.exporting,i=o.buttons;if(n=0,o.enabled!==!1){for(e in i)t.addButton(i[e]);a(t,"destroy",t.destroyExport)}})});