<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>vaadin-combo basic tests</title>
  <script src="../../web-component-tester/browser.js"></script>

  <link rel="import" href="common.html">
  <script src="../../promise-polyfill/Promise.js"></script>
  <script src="common.js"></script>
</head>

<body>

<test-fixture id="combobox">
  <template>
    <vaadin-combo-box></vaadin-combo-box>
  </template>
</test-fixture>

<script>describe("Accessible Rich Internet Applications (ARIA)",function(){function e(){return n.$.input}function t(){return n.$.overlay.$.selector}function o(e){return n.$.overlay.$.selector.querySelectorAll(".item")[e]}function i(){MockInteractions.keyDownOn(e(),40)}function a(){MockInteractions.keyDownOn(e(),27)}var n;beforeEach(function(){n=fixture("combobox"),n.items=["foo","bar","baz"]}),describe("when combo-box is attached",function(){it("should contain appropriate aria attributes",function(){expect(e().getAttribute("role")).to.equal("combobox"),expect(e().getAttribute("aria-labelledby")).to.equal("label"),expect(e().getAttribute("aria-autocomplete")).to.equal("list"),expect(e().getAttribute("aria-owns")).to.equal("overlay")})}),describe("when overlay opens or close",function(){beforeEach(function(){i()}),it("iron-list should have role listbox",function(){expect(n.$.overlay.$.selector.getAttribute("role")).to.equal("listbox")}),it("should set aria-expanded attribute when opened",function(){expect(e().getAttribute("aria-expanded")).to.equal("true")}),it("should unset aria-expanded attribute when closed",function(){a(),expect(e().getAttribute("aria-expanded")).to.equal("false")})}),describe("navigating the items",function(){beforeEach(function(){i()}),it("should set selection aria attributes when focusing an item",function(){t().selectedItem="foo",i(),expect(o(0).getAttribute("role")).to.equal("option"),expect(o(0).getAttribute("aria-selected")).to.equal("true"),expect(o(1).getAttribute("aria-selected")).to.equal("false"),expect(e().getAttribute("aria-activedescendant")).to.equal("it0"),expect(n.$.overlay.$.selector.getAttribute("data-selection")).to.equal("it0")})})});</script>




</body></html>