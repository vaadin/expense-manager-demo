<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>vaadin-combo basic tests</title>
  <script src="../../web-component-tester/browser.js"></script>

  <link rel="import" href="common.html">
  <link rel="import" href="../../iron-form/iron-form.html">
</head>

<body>

  <test-fixture id="combobox">
    <template>
      <vaadin-combo-box></vaadin-combo-box>
    </template>
  </test-fixture>

  <test-fixture id="combobox-in-form">
    <template is="dom-template">
      <form is="iron-form">
        <vaadin-combo-box name="[[name]]" required="[[required]]"></vaadin-combo-box>
      </form>
    </template>
  </test-fixture>

  <script>describe("using as a field in html form",function(){var e;beforeEach(function(){e=fixture("combobox"),e.allowCustomValue=!0}),it("should have the given name",function(){e.name="foo",expect(e.$$("input").getAttribute("name")).to.equal("foo")}),it("should have no name",function(){expect(e.$$("input").getAttribute("name")).to.equal(null)}),it("should be required",function(){e.required=!0,expect(e.$$("input").getAttribute("required")).to.equal("")}),it("should not be required",function(){expect(e.$$("input").getAttribute("required")).to.equal(null)}),it("should be disabled",function(){e.disabled=!0,expect(e.$$("input").getAttribute("disabled")).to.equal("")}),it("should have disabled paper-input-container",function(){e.disabled=!0,expect(e.$$("paper-input-container").getAttribute("disabled")).to.equal("")}),it("should be read-only",function(){e.readonly=!0,expect(e.$$("input").getAttribute("readonly")).to.equal("")}),it("should validate correctly",function(){e.name="foo",e.required=!0,expect(e.validate()).to.equal(!1),expect(e.invalid).to.be.equal(!0),e.value="foo",expect(e.validate()).to.equal(!0),expect(e.invalid).to.be.equal(!1)}),it("should serialize correctly",function(){var t=fixture("combobox-in-form",{name:"foo"});e=t.querySelector("vaadin-combo-box"),e.value="bar",expect(t.serialize().foo).to.equal("bar")}),it("should not-submit iron-form with invalid value",function(){var e=fixture("combobox-in-form",{name:"foo",required:!0}),t=sinon.spy();e.addEventListener("iron-form-invalid",t),e.submit(),expect(t).to.have.been.called}),describe("enter key behavior",function(){var e,t,o,i;beforeEach(function(){t=sinon.spy(),e=new CustomEvent("keydown",{bubbles:!0,cancelable:!0}),e.keyCode=13,e.code=13,e.preventDefault=t,o=fixture("combobox-in-form").$$("vaadin-combo-box"),i=o.$$("input")}),it("should prevent default on open combobox",function(){o.open(),i.dispatchEvent(e),expect(t).to.have.been.called}),it("should not prevent default on closed combobox",function(){i.dispatchEvent(e),expect(t).to.not.have.been.called})})});</script>




</body></html>